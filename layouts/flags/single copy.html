{{ define "main" }}
<h3>{{ .Title }}</h3>

{{ $key := .Params.flagKey }}
<!-- Show all available images -->
<div class="d-flex flex-wrap justify-content-around mb-2 contrast-pattern">
{{ range .Params.images }}
<div class="m-2">{{ partial "sf/single-flag" (dict "ctx" $ "folder" . "key" $key) }}</div>
{{ end }}
</div>

<div class="my-2">
{{ with .Page.Params.Categories }}{{ partial "taxonomy/categories.html" . }}{{ end }}
{{ with .Page.Params.Tags }}{{ partial "taxonomy/tags.html" . }}{{ end }}
</div>

<div class="my-2">
{{ .Content }}
</div>

<div class="my-2">
<h3>Select design</h3>
<!-- Tabs for each image -->
  {{/* <ul class="nav nav-pills flex-column flex-sm-row mb-2"> */}}
  <ul class="nav nav-pills flex-row">
    {{ range $i, $image := .Params.images }}
    {{ $design := index $.Site.Data.sfDesigns.designs . }}
    <li class="nav-item" role="presentation">
      <button
        {{/* class="flex-sm-fill text-sm-center nav-link{{ if eq $i 0 }} active{{ end }}" */}}
        class="flex-fill text-center nav-link{{ if eq $i 0 }} active{{ end }}"
        id="{{ $image }}-tab"
        data-bs-toggle="tab"
        data-bs-target="#tab-{{ $image }}"
        type="button"
        role="tab"
        aria-controls="home"
        aria-selected="true">{{ $design.human }}</button>
    </li>
    {{ end }}
  </ul>
</div>

<div class="tab-content">
  {{ range $i, $image := .Params.images }}
  {{ $design := index $.Site.Data.sfDesigns.designs . }}
  <div class="tab-pane {{ if eq $i 0 }} show active{{ end }}" id="tab-{{ $image }}" role="tabpanel" aria-labelledby="{{ $image }}-tab">
    <div class="row">
      <!-- Individual flag image -->
      <div class="col-md-3 col-lg-2">
        <div class="d-none d-sm-block"><h5>Design</h5></div>
        <div class="d-flex flex-wrap justify-content-evenly">
          <div class="bg-secondary p-2">
            {{ partial "sf/single-flag" (dict "ctx" $ "folder" . "key" $key) }}
          </div>
          <div class="p-2">
            {{ partial "sf/single-flag" (dict "ctx" $ "folder" . "key" $key) }}
          </div>
        </div>
      </div>

      <div class="col-md-9 col-lg-10">
        <!-- SVG code panel -->
        <h5>SVG markup</h5>
        {{ highlight (index $.Site.Data.sf.svg.svg $design.path $key) "svg" "style=solarized-light" }}
      </div>
    </div>
  </div>
{{ end }}
</div>

{{ end }}
